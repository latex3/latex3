This is a generated file for the LaTeX (2e + expl3) validation system.
Don't change this file in any respect.
Author: Joseph Wright, Frank Mittelbach, Bruno Le Floch
============================================================
TEST 1: Checking for existing definitions
============================================================
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/command-already-defined"
! 
! Command '\foo' already defined!
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l. ...}
|'''''''''''''''''''''''''''''''''''''''''''''''
| You have used \NewDocumentCommand with a command that already has a
| definition.
| The existing definition of '\foo' will not be altered.
|...............................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/command-not-yet-defined"
! 
! Command '\foo' not yet defined!
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l. ...}
|'''''''''''''''''''''''''''''''''''''''''''''''
| You have used \RenewDocumentCommand with a command that was never defined.
| A new command '\foo' will be created.
|...............................................
> \foo=\protected macro:->\__xparse_start_expandable:nNNNn {}\foo  \foo code
\foo defaults {}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:->First definition.
<recently read> }
l. ...}
============================================================
============================================================
TEST 2: Commands with simple mandatory arguments
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining command \foo with sig. 'm' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start_expandable:nNNNn {m}\foo  \foo code
\foo defaults {\__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1->(#1).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mm' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start_expandable:nNNNn {mm}\foo  \foo code
\foo defaults {\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2->(#1)(#2).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmm' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start_expandable:nNNNn {mmm}\foo  \foo
code \foo defaults {\__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3->(#1)(#2)(#3).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmm' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start_expandable:nNNNn {mmmm}\foo  \foo
code \foo defaults {\__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3#4->(#1)(#2)(#3)(#4).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmmm' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start_expandable:nNNNn {mmmmm}\foo  \foo
code \foo defaults {\__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3#4#5->(#1)(#2)(#3)(#4)(#5).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmmmm' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start_expandable:nNNNn {mmmmmm}\foo  \foo
code \foo defaults {\__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3#4#5#6->(#1)(#2)(#3)(#4)(#5)(#6).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmmmmm' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start_expandable:nNNNn {mmmmmmm}\foo  \foo
code \foo defaults {\__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\protected\long
macro:#1#2#3#4#5#6#7->(#1)(#2)(#3)(#4)(#5)(#6)(#7).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmmmmmm' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start_expandable:nNNNn {mmmmmmmm}\foo 
\foo code \foo defaults {\__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\protected\long
macro:#1#2#3#4#5#6#7#8->(#1)(#2)(#3)(#4)(#5)(#6)(#7)(#8).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmmmmmmm' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start_expandable:nNNNn {mmmmmmmmm}\foo 
\foo code \foo defaults {\__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\protected\long
macro:#1#2#3#4#5#6#7#8#9->(#1)(#2)(#3)(#4)(#5)(#6)(#7)(#8)(#9).
<recently read> }
l. ...}
============================================================
============================================================
TEST 3: Command with too many arguments
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining command \foo with sig. 'mmmmmmmmmm' on line ....
.................................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/too-many-arguments"
! 
! Too many arguments in argument specification 'mmmmmmmmmm' of command '\foo'.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l. ...}
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| The argument specification provided has more than 9 arguments. This cannot
| be implemented.
| 
| LaTeX will ignore this entire definition.
|...............................................
> \foo=undefined.
<recently read> }
l. ...}
> \foo code=undefined.
<recently read> }
l. ...}
============================================================
============================================================
TEST 4: Commands with one long mandatory argument
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining command \foo with sig. '+m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {+m}\foo  \foo code
{\__xparse_grab_m_long:w }{}{}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1->(#1).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'm+m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {m+m}\foo  \foo code
{\__xparse_grab_m_1:w \__xparse_grab_m_long:w }{}{}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2->(#1)(#2).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mm+m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {mm+m}\foo  \foo code
{\__xparse_grab_m_2:w \__xparse_grab_m_long:w }{}{}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3->(#1)(#2)(#3).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmm+m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {mmm+m}\foo  \foo code
{\__xparse_grab_m_3:w \__xparse_grab_m_long:w }{}{}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3#4->(#1)(#2)(#3)(#4).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmm+m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {mmmm+m}\foo  \foo code
{\__xparse_grab_m_4:w \__xparse_grab_m_long:w }{}{}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3#4#5->(#1)(#2)(#3)(#4)(#5).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmmm+m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {mmmmm+m}\foo  \foo code
{\__xparse_grab_m_5:w \__xparse_grab_m_long:w }{}{}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3#4#5#6->(#1)(#2)(#3)(#4)(#5)(#6).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmmmm+m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {mmmmmm+m}\foo  \foo code
{\__xparse_grab_m_6:w \__xparse_grab_m_long:w }{}{}.
<recently read> }
l. ...}
> \foo code=\protected\long
macro:#1#2#3#4#5#6#7->(#1)(#2)(#3)(#4)(#5)(#6)(#7).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmmmmm+m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {mmmmmmm+m}\foo  \foo code
{\__xparse_grab_m_7:w \__xparse_grab_m_long:w }{}{}.
<recently read> }
l. ...}
> \foo code=\protected\long
macro:#1#2#3#4#5#6#7#8->(#1)(#2)(#3)(#4)(#5)(#6)(#7)(#8).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmmmmmm+m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {mmmmmmmm+m}\foo  \foo code
{\__xparse_grab_m_8:w \__xparse_grab_m_long:w }{}{}.
<recently read> }
l. ...}
> \foo code=\protected\long
macro:#1#2#3#4#5#6#7#8#9->(#1)(#2)(#3)(#4)(#5)(#6)(#7)(#8)(#9).
<recently read> }
l. ...}
============================================================
============================================================
TEST 5: Commands with one processed mandatory argument
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining command \foo with sig. '>{\foo }m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {>{\foo }m}\foo  \foo code
{\__xparse_grab_m:w }{}{{{\foo }}}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1->(#1).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'm>{\foo }m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {m>{\foo }m}\foo  \foo code
{\__xparse_grab_m_1:w \__xparse_grab_m:w }{}{{}{{\foo }}}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2->(#1)(#2).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mm>{\foo }m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {mm>{\foo }m}\foo  \foo code
{\__xparse_grab_m_2:w \__xparse_grab_m:w }{}{{}{}{{\foo }}}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3->(#1)(#2)(#3).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmm>{\foo }m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {mmm>{\foo }m}\foo  \foo code
{\__xparse_grab_m_3:w \__xparse_grab_m:w }{}{{}{}{}{{\foo }}}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3#4->(#1)(#2)(#3)(#4).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmm>{\foo }m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {mmmm>{\foo }m}\foo  \foo
code {\__xparse_grab_m_4:w \__xparse_grab_m:w }{}{{}{}{}{}{{\foo }}}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3#4#5->(#1)(#2)(#3)(#4)(#5).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmmm>{\foo }m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {mmmmm>{\foo }m}\foo  \foo
code {\__xparse_grab_m_5:w \__xparse_grab_m:w }{}{{}{}{}{}{}{{\foo }}}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3#4#5#6->(#1)(#2)(#3)(#4)(#5)(#6).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmmmm>{\foo }m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {mmmmmm>{\foo }m}\foo  \foo
code {\__xparse_grab_m_6:w \__xparse_grab_m:w }{}{{}{}{}{}{}{}{{\foo }}}.
<recently read> }
l. ...}
> \foo code=\protected\long
macro:#1#2#3#4#5#6#7->(#1)(#2)(#3)(#4)(#5)(#6)(#7).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmmmmm>{\foo }m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {mmmmmmm>{\foo }m}\foo  \foo
code {\__xparse_grab_m_7:w \__xparse_grab_m:w }{}{{}{}{}{}{}{}{}{{\foo }}}.
<recently read> }
l. ...}
> \foo code=\protected\long
macro:#1#2#3#4#5#6#7#8->(#1)(#2)(#3)(#4)(#5)(#6)(#7)(#8).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmmmmmmm>{\foo }m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {mmmmmmmm>{\foo }m}\foo  \foo
code {\__xparse_grab_m_8:w \__xparse_grab_m:w }{}{{}{}{}{}{}{}{}{}{{\foo }}}.
<recently read> }
l. ...}
> \foo code=\protected\long
macro:#1#2#3#4#5#6#7#8#9->(#1)(#2)(#3)(#4)(#5)(#6)(#7)(#8)(#9).
<recently read> }
l. ...}
============================================================
============================================================
TEST 6: Arguments read up to first brace
============================================================
> \l_test_tl=(\bar )(1).
<recently read> }
l. ...}
> \l_test_tl=(100)(2).
<recently read> }
l. ...}
> \l_test_tl=(\bar )(1).
<recently read> }
l. ...}
> \l_test_tl=(100)(2).
<recently read> }
l. ...}
============================================================
============================================================
TEST 7: Various mandatory combinations
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining command \foo with sig. 'lm' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start_expandable:nNNNn {lm}\foo  \foo code
\foo defaults {\__xparse_expandable_grab_u:w \foo (arg 1)
\__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2->(#1)(#2).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mlm' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start_expandable:nNNNn {mlm}\foo  \foo
code \foo defaults {\__xparse_expandable_grab_m:w
\__xparse_expandable_grab_u:w \foo (arg 2) \__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3->(#1)(#2)(#3).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'u{end}u{stop!}' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start_expandable:nNNNn
{u{end}u{stop!}}\foo  \foo code \foo defaults {\__xparse_expandable_grab_u:w
\foo (arg 1) \__xparse_expandable_grab_u:w \foo (arg 2) }.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2->(#1)(#2).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'lll' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start_expandable:nNNNn {lll}\foo  \foo
code \foo defaults {\__xparse_expandable_grab_u:w \foo (arg 1)
\__xparse_expandable_grab_u:w \foo (arg 2) \__xparse_expandable_grab_u:w \foo
(arg 3) }.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3->(#1)(#2)(#3).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. '+l>{\foo }u{end}' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {+l>{\foo }u{end}}\foo  \foo
code {\__xparse_grab_l_long:w \__xparse_grab_u:w {end}}{}{{}{{\foo }}}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2->(#1)(#2).
<recently read> }
l. ...}
============================================================
============================================================
TEST 8: Optional argument creation
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining command \foo with sig. 'som' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {som}\foo  \foo code
{\__xparse_grab_t:w *\__xparse_grab_D:w []\__xparse_grab_m_1:w
}{.{.-NoValue-}.}{}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3->(#1)(#2)(#3).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 't+d()+m' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {t+d()+m}\foo  \foo code
{\__xparse_grab_t:w +\__xparse_grab_D:w ()\__xparse_grab_m_long:w
}{.{.-NoValue-}.}{}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3->(#1)(#2)(#3).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. '+t\par O{default}mmm' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {+t\par O{default}mmm}\foo 
\foo code {\__xparse_grab_t_long:w \par \__xparse_grab_D:w
[]\__xparse_grab_m_3:w }{.{.default}...}{}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3#4#5->(#1)(#2)(#3)(#4).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'momo' on line ....
.................................................
> \foo=\protected macro:->\__xparse_start:nNNnnn {momo}\foo  \foo code
{\__xparse_grab_m_1:w \__xparse_grab_D:w []\__xparse_grab_m_1:w
\__xparse_grab_D_trailing:w []}{.{.-NoValue-}.{.-NoValue-}}{}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3#4->(#1)(#2)(#3)(#4).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mgom' on line ....
.................................................
*************************************************
* LaTeX warning: "xparse/optional-mandatory"
* 
* Since the mandatory argument 'm' has the same delimiter '{' as a previous
* optional argument, it will not be possible to omit all optional arguments
* when calling this command.
*************************************************
> \foo=\protected macro:->\__xparse_start:nNNnnn {mgom}\foo  \foo code
{\__xparse_grab_m_1:w \__xparse_grab_G:w \__xparse_grab_D:w
[]\__xparse_grab_m_1:w }{.{.-NoValue-}{.-NoValue-}.}{}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3#4->(#1)(#2)(#3)(#4).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mG{test}sm' on line ....
.................................................
*************************************************
* LaTeX warning: "xparse/optional-mandatory"
* 
* Since the mandatory argument 'm' has the same delimiter '{' as a previous
* optional argument, it will not be possible to omit all optional arguments
* when calling this command.
*************************************************
> \foo=\protected macro:->\__xparse_start:nNNnnn {mG{test}sm}\foo  \foo code
{\__xparse_grab_m_1:w \__xparse_grab_G:w \__xparse_grab_t:w
*\__xparse_grab_m_1:w }{.{.test}..}{}.
<recently read> }
l. ...}
> \foo code=\protected\long macro:#1#2#3#4->(#1)(#2)(#3)(#4).
<recently read> }
l. ...}
============================================================
============================================================
TEST 9: Unknown argument types
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining command \foo with sig. 'mmn' on line ....
.................................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/unknown-argument-type"
! 
! Unknown argument type 'n' for the command '\foo'.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l. ...}
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| The letter 'n' does not specify a known argument type. LaTeX will ignore
| this entire definition.
|...............................................
> \foo=undefined.
<recently read> }
l. ...}
> \foo code=undefined.
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining command \foo with sig. 'abc' on line ....
.................................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/unknown-argument-type"
! 
! Unknown argument type 'a' for the command '\foo'.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l. ...}
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| The letter 'a' does not specify a known argument type. LaTeX will ignore
| this entire definition.
|...............................................
> \foo=undefined.
<recently read> }
l. ...}
> \foo code=undefined.
<recently read> }
l. ...}
============================================================
============================================================
TEST 10: Some valid expandable functions
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining command \foo with sig. 'm' on line ....
.................................................
> \foo=macro:->\__xparse_start_expandable:nNNNn {m}\foo  \foo code \foo
defaults {\__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\long macro:#1->(#1).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. '+m' on line ....
.................................................
> \foo=macro:->\__xparse_start_expandable:nNNNn {+m}\foo  \foo code \foo
defaults {\__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\long macro:#1->(#1).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'mmm' on line ....
.................................................
> \foo=macro:->\__xparse_start_expandable:nNNNn {mmm}\foo  \foo code \foo
defaults {\__xparse_expandable_grab_m:w \__xparse_expandable_grab_m:w
\__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\long macro:#1#2#3->(#1)(#2)(#3).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'om' on line ....
.................................................
> \foo=macro:->\__xparse_start_expandable:nNNNn {om}\foo  \foo code \foo
defaults {\__xparse_expandable_grab_D:w \foo (arg 1)
[]\__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\long macro:#1#2->(#1)(#2).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. '+o+m' on line ....
.................................................
> \foo=macro:->\__xparse_start_expandable:nNNNn {+o+m}\foo  \foo code \foo
defaults {\__xparse_expandable_grab_D:w \foo (arg 1)
[]\__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\long macro:#1#2->(#1)(#2).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'sm' on line ....
.................................................
> \foo=macro:->\__xparse_start_expandable:nNNNn {sm}\foo  \foo code \foo
defaults {\__xparse_expandable_grab_t:w \__xparse_grabber_*:w
*\__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\long macro:#1#2->(#1)(#2).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'osm' on line ....
.................................................
> \foo=macro:->\__xparse_start_expandable:nNNNn {osm}\foo  \foo code \foo
defaults {\__xparse_expandable_grab_D:w \foo (arg 1)
[]\__xparse_expandable_grab_t:w \__xparse_grabber_*:w
*\__xparse_expandable_grab_m:w }.
<recently read> }
l. ...}
> \foo code=\long macro:#1#2#3->(#1)(#2)(#3).
<recently read> }
l. ...}
============================================================
============================================================
TEST 11: Not valid as expandable functions
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining command \foo with sig. 'mo' on line ....
.................................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/expandable-ending-optional"
! 
! Argument specification 'mo' for expandable command '\foo' ends with optional
! argument.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l. ...}
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| Expandable commands must have a final mandatory argument (or no arguments at
| all). You cannot have a terminal optional argument with expandable commands.
|...............................................
> \foo=undefined.
<recently read> }
l. ...}
> \foo code=undefined.
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining command \foo with sig. '+mmm' on line ....
.................................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/inconsistent-long"
! 
! Inconsistent long arguments for expandable command '\foo'.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l. ...}
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| The arguments for an expandable command must either all be short or all be
| long. You have tried to mix the two types.
|...............................................
> \foo=undefined.
<recently read> }
l. ...}
> \foo code=undefined.
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining command \foo with sig. 'o+m' on line ....
.................................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/inconsistent-long"
! 
! Inconsistent long arguments for expandable command '\foo'.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l. ...}
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| The arguments for an expandable command must either all be short or all be
| long. You have tried to mix the two types.
|...............................................
> \foo=undefined.
<recently read> }
l. ...}
> \foo code=undefined.
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining command \foo with sig. 'r()o' on line ....
.................................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/expandable-ending-optional"
! 
! Argument specification 'r()o' for expandable command '\foo' ends with
! optional argument.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l. ...}
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| Expandable commands must have a final mandatory argument (or no arguments at
| all). You cannot have a terminal optional argument with expandable commands.
|...............................................
> \foo=undefined.
<recently read> }
l. ...}
> \foo code=undefined.
<recently read> }
l. ...}
============================================================
============================================================
TEST 12: Checking for existing environments
============================================================
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/environment-already-defined"
! 
! Environment 'foo' already defined!
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l. ...}
|'''''''''''''''''''''''''''''''''''''''''''''''
| You have used \NewDocumentEnvironment with an environment that already has a
| definition.
| The existing definition of 'foo' will be overwritten.
|...............................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/environment-not-yet-defined"
! 
! Environment 'foo' not yet defined!
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l. ...}
|'''''''''''''''''''''''''''''''''''''''''''''''
| You have used \RenewDocumentEnvironment with an environment that was never
| defined.
| A new environment 'foo' will be created.
|...............................................
> \environment foo=\protected macro:->\__xparse_start:nNNnnn {}\environment
foo  \environment foo code {}{}{}.
<recently read> }
l. ...}
> \environment foo code=\protected\long macro:->\cs_set_nopar:Npx \environment
foo end aux {\exp_not:N \environment foo end aux  \exp_not:o
\l__xparse_args_tl }First.
<recently read> }
l. ...}
============================================================
============================================================
TEST 13: Valid environment declarations
============================================================
.................................................
. LaTeX info: "xparse/define-environment"
. 
. Defining environment 'foo' with sig. 'mmm' on line ....
.................................................
> \environment foo=\protected macro:->\__xparse_start:nNNnnn {mmm}\environment
foo  \environment foo code {\__xparse_grab_m_3:w }{}{}.
<recently read> }
l. ...}
> \environment foo code=\protected\long macro:#1#2#3->\cs_set_nopar:Npx
\environment foo end aux {\exp_not:N \environment foo end aux  \exp_not:o
\l__xparse_args_tl }(#1)(#2)(#3).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-environment"
. 
. Redefining environment 'foo' with sig. 'som' on line ....
.................................................
> \environment foo=\protected macro:->\__xparse_start:nNNnnn {som}\environment
foo  \environment foo code {\__xparse_grab_t:w *\__xparse_grab_D:w
[]\__xparse_grab_m_1:w }{.{.-NoValue-}.}{}.
<recently read> }
l. ...}
> \environment foo code=\protected\long macro:#1#2#3->\cs_set_nopar:Npx
\environment foo end aux {\exp_not:N \environment foo end aux  \exp_not:o
\l__xparse_args_tl }(#1)(#2)(#3).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-environment"
. 
. Redefining environment 'foo' with sig. 'so+m' on line ....
.................................................
> \environment foo=\protected macro:->\__xparse_start:nNNnnn
{so+m}\environment foo  \environment foo code {\__xparse_grab_t:w
*\__xparse_grab_D:w []\__xparse_grab_m_long:w }{.{.-NoValue-}.}{}.
<recently read> }
l. ...}
> \environment foo code=\protected\long macro:#1#2#3->\cs_set_nopar:Npx
\environment foo end aux {\exp_not:N \environment foo end aux  \exp_not:o
\l__xparse_args_tl }(#1)(#2)(#3).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-environment"
. 
. Redefining environment 'foo' with sig. 'u{stop}om' on line ....
.................................................
> \environment foo=\protected macro:->\__xparse_start:nNNnnn
{u{stop}om}\environment foo  \environment foo code {\__xparse_grab_u:w
{stop}\__xparse_grab_D:w []\__xparse_grab_m_1:w }{.{.-NoValue-}.}{}.
<recently read> }
l. ...}
> \environment foo code=\protected\long macro:#1#2#3->\cs_set_nopar:Npx
\environment foo end aux {\exp_not:N \environment foo end aux  \exp_not:o
\l__xparse_args_tl }(#1)(#2)(#3).
<recently read> }
l. ...}
.................................................
. LaTeX info: "xparse/redefine-environment"
. 
. Redefining environment 'foo' with sig. 'moo' on line ....
.................................................
> \environment foo=\protected macro:->\__xparse_start:nNNnnn {moo}\environment
foo  \environment foo code {\__xparse_grab_m_1:w \__xparse_grab_D_trailing:w
[]\__xparse_grab_D_trailing:w []}{.{.-NoValue-}{.-NoValue-}}{}.
<recently read> }
l. ...}
> \environment foo code=\protected\long macro:#1#2#3->\cs_set_nopar:Npx
\environment foo end aux {\exp_not:N \environment foo end aux  \exp_not:o
\l__xparse_args_tl }(#1)(#2)(#3).
<recently read> }
l. ...}
============================================================
============================================================
TEST 14: Environment groups: should show "outside" and 1
============================================================
> \l_test_tl=outside.
<recently read> }
l. ...}
> \currentgrouplevel=1.
<recently read> }
l. ...}
> \l_test_tl=outside.
<recently read> }
l. ...}
> \currentgrouplevel=1.
<recently read> }
l. ...}
> \l_test_tl=outside.
<recently read> }
l. ...}
> \currentgrouplevel=1.
<recently read> }
l. ...}
============================================================
============================================================
TEST 15: Passing args to end of environments: display correct args
============================================================
> (A).
<recently read> }
l. ...}
> (A)(B).
<recently read> }
l. ...}
> (A)(B)(C).
<recently read> }
l. ...}
> (A)(-NoValue-)(-NoValue-).
<recently read> }
l. ...}
============================================================
============================================================
TEST 16: Nested environments
============================================================
> \@currenvir=foo.
<recently read> }
l. ...}
> \@currenvir=document.
<recently read> }
l. ...}
============================================================
============================================================
TEST 17: Passing arguments to the end with more complex cases
============================================================
> \box57=
\hbox(6.94444+1.94444)x142.50034
.\OT1/cmr/m/n/10 s
.\OT1/cmr/m/n/10 t
.\OT1/cmr/m/n/10 a
.\OT1/cmr/m/n/10 r
.\OT1/cmr/m/n/10 t
.\OT1/cmr/m/n/10 m
.\OT1/cmr/m/n/10 i
.\OT1/cmr/m/n/10 d
.\OT1/cmr/m/n/10 d
.\OT1/cmr/m/n/10 l
.\OT1/cmr/m/n/10 e
.\OT1/cmr/m/n/10 s
.\OT1/cmr/m/n/10 t
.\OT1/cmr/m/n/10 o
.\OT1/cmr/m/n/10 p
.\OT1/cmr/m/n/10 !
.\OT1/cmr/m/n/10 s
.\OT1/cmr/m/n/10 t
.\OT1/cmr/m/n/10 a
.\OT1/cmr/m/n/10 r
.\OT1/cmr/m/n/10 t
.\OT1/cmr/m/n/10 m
.\OT1/cmr/m/n/10 i
.\OT1/cmr/m/n/10 d
.\OT1/cmr/m/n/10 d
.\OT1/cmr/m/n/10 l
.\OT1/cmr/m/n/10 e
.\OT1/cmr/m/n/10 s
.\OT1/cmr/m/n/10 t
.\OT1/cmr/m/n/10 o
.\OT1/cmr/m/n/10 p
.\OT1/cmr/m/n/10 !
! OK.
<argument> \l_tmpa_box 
l. ...  }
============================================================
============================================================
TEST 18: Expansion at end of environment
============================================================
LaTeX Font Info:    External font `cmex10' loaded for size
(Font)              <7> on input line ....
LaTeX Font Info:    External font `cmex10' loaded for size
(Font)              <5> on input line ....
> \box57=
\hbox(8.5+3.5)x58.44452
.\hbox(8.5+3.5)x29.22226
..\mathon
..\vbox(8.5+3.5)x29.22226
...\rule(0.0+0.0)x29.22226
...\hbox(8.39996+3.60004)x29.22226
....\glue(\tabskip) 0.0
....\hbox(8.39996+3.60004)x18.66667
.....\rule(8.39996+3.60004)x0.0
.....\glue 0.0
.....\glue 0.0 plus 1.0fil
.....\OT1/cmr/m/n/10 T
.....\kern-0.83334
.....\OT1/cmr/m/n/10 e
.....\OT1/cmr/m/n/10 s
.....\OT1/cmr/m/n/10 t
.....\glue 0.0 plus 1.0fil
.....\glue 0.0
....\glue(\tabskip) 0.0
....\hbox(8.39996+3.60004)x5.00002
.....\glue 0.0
.....\glue 0.0 plus 1.0fil
.....\OT1/cmr/m/n/10 a
.....\glue 0.0 plus 1.0fil
.....\glue 0.0
....\glue(\tabskip) 0.0
....\hbox(8.39996+3.60004)x5.55557
.....\glue 0.0
.....\glue 0.0 plus 1.0fil
.....\OT1/cmr/m/n/10 b
.....\glue 0.0 plus 1.0fil
.....\glue 0.0
....\glue(\tabskip) 0.0
...\rule(0.0+0.0)x29.22226
..\mathoff
.\hbox(8.5+3.5)x29.22226
..\mathon
..\vbox(8.5+3.5)x29.22226
...\rule(0.0+0.0)x29.22226
...\hbox(8.39996+3.60004)x29.22226
....\glue(\tabskip) 0.0
....\hbox(8.39996+3.60004)x18.66667
.....\rule(8.39996+3.60004)x0.0
.....\glue 0.0
.....\glue 0.0 plus 1.0fil
.....\OT1/cmr/m/n/10 T
.....\kern-0.83334
.....\OT1/cmr/m/n/10 e
.....\OT1/cmr/m/n/10 s
.....\OT1/cmr/m/n/10 t
.....\glue 0.0 plus 1.0fil
.....\glue 0.0
....\glue(\tabskip) 0.0
....\hbox(8.39996+3.60004)x5.00002
.....\glue 0.0
.....\glue 0.0 plus 1.0fil
.....\OT1/cmr/m/n/10 a
.....\glue 0.0 plus 1.0fil
.....\glue 0.0
....\glue(\tabskip) 0.0
....\hbox(8.39996+3.60004)x5.55557
.....\glue 0.0
.....\glue 0.0 plus 1.0fil
.....\OT1/cmr/m/n/10 b
.....\glue 0.0 plus 1.0fil
.....\glue 0.0
....\glue(\tabskip) 0.0
...\rule(0.0+0.0)x29.22226
..\mathoff
! OK.
<argument> \l_tmpa_box 
l. ...  }
============================================================
============================================================
TEST 19: (ab)using xparse commands in csnames
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining command \foo with sig. 'mm' on line ....
.................................................
\test-abc-def 
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'u.' on line ....
.................................................
\test-test-abc 
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'l' on line ....
.................................................
\test-abc.{def} 
.................................................
. LaTeX info: "xparse/redefine-command"
. 
. Redefining command \foo with sig. 'D...' on line ....
.................................................
! Missing \endcsname inserted.
<to be read again> 
                   \xparse function is not expandable 
l. ...  }
The control sequence marked <to be read again> should
not appear between \csname and \endcsname.
\test- \xparse function is not expandable \__xparse_start_aux:nNNnnn {D...}\foo code {\__xparse_grab_D_trailing:w ..}{{..}}{}....\cs_end: 
============================================================
