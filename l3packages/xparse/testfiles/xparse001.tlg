This is a generated file for the LaTeX (2e + expl3) validation system.
Don't change this file in any respect.
%% \CharacterTable
%%  {Upper-case    \A\B\C\D\E\F\G\H\I\J\K\L\M\N\O\P\Q\R\S\T\U\V\W\X\Y\Z
%%   Lower-case    \a\b\c\d\e\f\g\h\i\j\k\l\m\n\o\p\q\r\s\t\u\v\w\x\y\z
%%   Digits        \0\1\2\3\4\5\6\7\8\9
%%   Exclamation   \!     Double quote  \"     Hash (number) \#
%%   Dollar        \$     Percent       \%     Ampersand     \&
%%   Acute accent  \'     Left paren    \(     Right paren   \)
%%   Asterisk      \*     Plus          \+     Comma         \,
%%   Minus         \-     Point         \.     Solidus       \/
%%   Colon         \:     Semicolon     \;     Less than     \<
%%   Equals        \=     Greater than  \>     Question mark \?
%%   Commercial at \@     Left bracket  \[     Backslash     \\
%%   Right bracket \]     Circumflex    \^     Underscore    \_
%%   Grave accent  \`     Left brace    \{     Vertical bar  \|
%%   Right brace   \}     Tilde         \~}
%%
Author: Joseph Wright, Frank Mittelbach
============================================================
TEST 1: Checking for existing definitions
============================================================
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/command-already-defined"
! 
! Command '\foo' already defined!
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l.41 }
|'''''''''''''''''''''''''''''''''''''''''''''''
| You have used \NewDocumentCommand with a command that already has a
| definition.
| The existing definition of '\foo' will be overwritten.
|...............................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/command-not-yet-defined"
! 
! Command '\foo' not yet defined!
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l.41 }
|'''''''''''''''''''''''''''''''''''''''''''''''
| You have used \RenewDocumentCommand with a command that was never defined.
| A new command '\foo' will be created.
|...............................................
> \foo=\protected macro:
->First definition.
<recently read> }
l.41 }
> \foo code=undefined.
<recently read> }
l.41 }
============================================================
============================================================
TEST 2: Commands with simple mandatory arguments
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining document command \foo with arg. spec. 'm' on line ....
.................................................
> \foo=\protected macro:
#1->(#1).
<recently read> }
l.67 }
> \foo code=undefined.
<recently read> }
l.67 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mm' on line ....
*************************************************
> \foo=\protected macro:
#1#2->(#1)(#2).
<recently read> }
l.67 }
> \foo code=undefined.
<recently read> }
l.67 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmm' on line ....
*************************************************
> \foo=\protected macro:
#1#2#3->(#1)(#2)(#3).
<recently read> }
l.67 }
> \foo code=undefined.
<recently read> }
l.67 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmm' on line ....
*************************************************
> \foo=\protected macro:
#1#2#3#4->(#1)(#2)(#3)(#4).
<recently read> }
l.67 }
> \foo code=undefined.
<recently read> }
l.67 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmmm' on line ....
*************************************************
> \foo=\protected macro:
#1#2#3#4#5->(#1)(#2)(#3)(#4)(#5).
<recently read> }
l.67 }
> \foo code=undefined.
<recently read> }
l.67 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmmmm' on line ....
*************************************************
> \foo=\protected macro:
#1#2#3#4#5#6->(#1)(#2)(#3)(#4)(#5)(#6).
<recently read> }
l.67 }
> \foo code=undefined.
<recently read> }
l.67 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmmmmm' on line ....
*************************************************
> \foo=\protected macro:
#1#2#3#4#5#6#7->(#1)(#2)(#3)(#4)(#5)(#6)(#7).
<recently read> }
l.67 }
> \foo code=undefined.
<recently read> }
l.67 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmmmmmm' on line ....
*************************************************
> \foo=\protected macro:
#1#2#3#4#5#6#7#8->(#1)(#2)(#3)(#4)(#5)(#6)(#7)(#8).
<recently read> }
l.67 }
> \foo code=undefined.
<recently read> }
l.67 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmmmmmmm' on line ....
*************************************************
> \foo=\protected macro:
#1#2#3#4#5#6#7#8#9->(#1)(#2)(#3)(#4)(#5)(#6)(#7)(#8)(#9).
<recently read> }
l.67 }
> \foo code=undefined.
<recently read> }
l.67 }
============================================================
============================================================
TEST 3: Command with too many arguments
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining document command \foo with arg. spec. 'mmmmmmmmmm' on line ....
.................................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "kernel/bad-number-of-arguments"
! 
! Function '\foo' cannot be defined with 10 arguments.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l.72 }
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| LaTeX has been asked to define a function '\foo' with 10 arguments. TeX
| allows between 0 and 9 arguments for a single function.
|...............................................
> \foo=undefined.
<recently read> }
l.72 }
> \foo code=undefined.
<recently read> }
l.72 }
============================================================
============================================================
TEST 4: Commands with one long mandatory argument
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining document command \foo with arg. spec. '+m' on line ....
.................................................
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_long:w
\l__xparse_args_tl .
<recently read> }
l.98 }
> \foo code=\protected\long macro:
#1->(#1).
<recently read> }
l.98 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'm+m' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_1:w
\__xparse_grab_m_long:w \l__xparse_args_tl .
<recently read> }
l.98 }
> \foo code=\protected\long macro:
#1#2->(#1)(#2).
<recently read> }
l.98 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mm+m' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_2:w
\__xparse_grab_m_long:w \l__xparse_args_tl .
<recently read> }
l.98 }
> \foo code=\protected\long macro:
#1#2#3->(#1)(#2)(#3).
<recently read> }
l.98 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmm+m' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_3:w
\__xparse_grab_m_long:w \l__xparse_args_tl .
<recently read> }
l.98 }
> \foo code=\protected\long macro:
#1#2#3#4->(#1)(#2)(#3)(#4).
<recently read> }
l.98 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmm+m' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_4:w
\__xparse_grab_m_long:w \l__xparse_args_tl .
<recently read> }
l.98 }
> \foo code=\protected\long macro:
#1#2#3#4#5->(#1)(#2)(#3)(#4)(#5).
<recently read> }
l.98 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmmm+m' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_5:w
\__xparse_grab_m_long:w \l__xparse_args_tl .
<recently read> }
l.98 }
> \foo code=\protected\long macro:
#1#2#3#4#5#6->(#1)(#2)(#3)(#4)(#5)(#6).
<recently read> }
l.98 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmmmm+m' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_6:w
\__xparse_grab_m_long:w \l__xparse_args_tl .
<recently read> }
l.98 }
> \foo code=\protected\long macro:
#1#2#3#4#5#6#7->(#1)(#2)(#3)(#4)(#5)(#6)(#7).
<recently read> }
l.98 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmmmmm+m' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_7:w
\__xparse_grab_m_long:w \l__xparse_args_tl .
<recently read> }
l.98 }
> \foo code=\protected\long macro:
#1#2#3#4#5#6#7#8->(#1)(#2)(#3)(#4)(#5)(#6)(#7)(#8).
<recently read> }
l.98 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmmmmmm+m' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_8:w
\__xparse_grab_m_long:w \l__xparse_args_tl .
<recently read> }
l.98 }
> \foo code=\protected\long macro:
#1#2#3#4#5#6#7#8#9->(#1)(#2)(#3)(#4)(#5)(#6)(#7)(#8)(#9).
<recently read> }
l.98 }
============================================================
============================================================
TEST 5: Commands with one processed mandatory argument
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining document command \foo with arg. spec. '>{\foo }m' on line ....
.................................................
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_process_arg:n {\foo
}\__xparse_grab_m:w \l__xparse_args_tl .
<recently read> }
l.125 }
> \foo code=\protected\long macro:
#1->(#1).
<recently read> }
l.125 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'm>{\foo }m' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_1:w
\__xparse_process_arg:n {\foo }\__xparse_grab_m:w \l__xparse_args_tl .
<recently read> }
l.125 }
> \foo code=\protected\long macro:
#1#2->(#1)(#2).
<recently read> }
l.125 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mm>{\foo }m' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_2:w
\__xparse_process_arg:n {\foo }\__xparse_grab_m:w \l__xparse_args_tl .
<recently read> }
l.125 }
> \foo code=\protected\long macro:
#1#2#3->(#1)(#2)(#3).
<recently read> }
l.125 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmm>{\foo }m' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_3:w
\__xparse_process_arg:n {\foo }\__xparse_grab_m:w \l__xparse_args_tl .
<recently read> }
l.125 }
> \foo code=\protected\long macro:
#1#2#3#4->(#1)(#2)(#3)(#4).
<recently read> }
l.125 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmm>{\foo }m' on line
* 125.
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_4:w
\__xparse_process_arg:n {\foo }\__xparse_grab_m:w \l__xparse_args_tl .
<recently read> }
l.125 }
> \foo code=\protected\long macro:
#1#2#3#4#5->(#1)(#2)(#3)(#4)(#5).
<recently read> }
l.125 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmmm>{\foo }m' on line
* 125.
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_5:w
\__xparse_process_arg:n {\foo }\__xparse_grab_m:w \l__xparse_args_tl .
<recently read> }
l.125 }
> \foo code=\protected\long macro:
#1#2#3#4#5#6->(#1)(#2)(#3)(#4)(#5)(#6).
<recently read> }
l.125 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmmmm>{\foo }m' on line
* 125.
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_6:w
\__xparse_process_arg:n {\foo }\__xparse_grab_m:w \l__xparse_args_tl .
<recently read> }
l.125 }
> \foo code=\protected\long macro:
#1#2#3#4#5#6#7->(#1)(#2)(#3)(#4)(#5)(#6)(#7).
<recently read> }
l.125 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmmmmm>{\foo }m' on line
* 125.
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_7:w
\__xparse_process_arg:n {\foo }\__xparse_grab_m:w \l__xparse_args_tl .
<recently read> }
l.125 }
> \foo code=\protected\long macro:
#1#2#3#4#5#6#7#8->(#1)(#2)(#3)(#4)(#5)(#6)(#7)(#8).
<recently read> }
l.125 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmmmmmmm>{\foo }m' on line
* 125.
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_8:w
\__xparse_process_arg:n {\foo }\__xparse_grab_m:w \l__xparse_args_tl .
<recently read> }
l.125 }
> \foo code=\protected\long macro:
#1#2#3#4#5#6#7#8#9->(#1)(#2)(#3)(#4)(#5)(#6)(#7)(#8)(#9).
<recently read> }
l.125 }
============================================================
============================================================
TEST 6: Arguments read up to first brace
============================================================
> \l_test_tl=macro:
->(\bar )(1).
<recently read> }
l.148 }
> \l_test_tl=macro:
->(100)(2).
<recently read> }
l.148 }
> \l_test_tl=macro:
->(\bar )(1).
<recently read> }
l.148 }
> \l_test_tl=macro:
->(100)(2).
<recently read> }
l.148 }
============================================================
============================================================
TEST 7: Various mandatory combinations
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining document command \foo with arg. spec. 'lm' on line ....
.................................................
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_l:w
\__xparse_grab_m_1:w \l__xparse_args_tl .
<recently read> }
l.161 }
> \foo code=\protected\long macro:
#1#2->(#1)(#2).
<recently read> }
l.161 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mlm' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_1:w
\__xparse_grab_l:w \__xparse_grab_m_1:w \l__xparse_args_tl .
<recently read> }
l.161 }
> \foo code=\protected\long macro:
#1#2#3->(#1)(#2)(#3).
<recently read> }
l.161 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'u{end}u{stop!}' on line
* 161.
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_u:w
{end}\__xparse_grab_u:w {stop!}\l__xparse_args_tl .
<recently read> }
l.161 }
> \foo code=\protected\long macro:
#1#2->(#1)(#2).
<recently read> }
l.161 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'lll' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_l:w
\__xparse_grab_l:w \__xparse_grab_l:w \l__xparse_args_tl .
<recently read> }
l.161 }
> \foo code=\protected\long macro:
#1#2#3->(#1)(#2)(#3).
<recently read> }
l.161 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. '+l>{\foo }u{end}' on line
* 161.
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_l_long:w
\__xparse_process_arg:n {\foo }\__xparse_grab_u:w {end}\l__xparse_args_tl .
<recently read> }
l.161 }
> \foo code=\protected\long macro:
#1#2->(#1)(#2).
<recently read> }
l.161 }
============================================================
============================================================
TEST 8: Optional argument creation
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining document command \foo with arg. spec. 'som' on line ....
.................................................
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_t:w
*\__xparse_grab_D:w []{-NoValue-}\__xparse_grab_m_1:w \l__xparse_args_tl .
<recently read> }
l.177 }
> \foo code=\protected\long macro:
#1#2#3->(#1)(#2)(#3).
<recently read> }
l.177 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 't+d()+m' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_t:w
+\__xparse_grab_D:w (){-NoValue-}\__xparse_grab_m_long:w \l__xparse_args_tl .
<recently read> }
l.177 }
> \foo code=\protected\long macro:
#1#2#3->(#1)(#2)(#3).
<recently read> }
l.177 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. '+t\par O{default}mmm' on
* line 177.
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_t_long:w \par
\__xparse_grab_D:w []{default}\__xparse_grab_m_3:w \l__xparse_args_tl .
<recently read> }
l.177 }
> \foo code=\protected\long macro:
#1#2#3#4#5->(#1)(#2)(#3)(#4).
<recently read> }
l.177 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'momo' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_1:w
\__xparse_grab_D:w []{-NoValue-}\__xparse_grab_m_1:w
\__xparse_grab_D_trailing:w []{-NoValue-}\l__xparse_args_tl .
<recently read> }
l.177 }
> \foo code=\protected\long macro:
#1#2#3#4->(#1)(#2)(#3)(#4).
<recently read> }
l.177 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mgom' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_1:w
\__xparse_grab_G:w {-NoValue-}\__xparse_grab_D:w
[]{-NoValue-}\__xparse_grab_m_1:w \l__xparse_args_tl .
<recently read> }
l.177 }
> \foo code=\protected\long macro:
#1#2#3#4->(#1)(#2)(#3)(#4).
<recently read> }
l.177 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mG{test}sm' on line ....
*************************************************
> \foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl {\foo
code }\tl_set:Nn \l__xparse_fn_tl {\foo  }\__xparse_grab_m_1:w
\__xparse_grab_G:w {test}\__xparse_grab_t:w *\__xparse_grab_m_1:w
\l__xparse_args_tl .
<recently read> }
l.177 }
> \foo code=\protected\long macro:
#1#2#3#4->(#1)(#2)(#3)(#4).
<recently read> }
l.177 }
============================================================
============================================================
TEST 9: Unknown argument types
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining document command \foo with arg. spec. 'mmn' on line ....
.................................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/unknown-argument-type"
! 
! Unknown argument type 'n' replaced by 'm'.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l.184 }
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| The letter 'n' does not specify a known argument type. LaTeX will assume you
| want a standard mandatory argument (type 'm').
|...............................................
> \foo=\protected macro:
#1#2#3->.
<recently read> }
l.184 }
> \foo code=undefined.
<recently read> }
l.184 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'abc' on line ....
*************************************************
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/unknown-argument-type"
! 
! Unknown argument type 'a' replaced by 'm'.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l.184 }
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| The letter 'a' does not specify a known argument type. LaTeX will assume you
| want a standard mandatory argument (type 'm').
|...............................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/unknown-argument-type"
! 
! Unknown argument type 'b' replaced by 'm'.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l.184 }
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| The letter 'b' does not specify a known argument type. LaTeX will assume you
| want a standard mandatory argument (type 'm').
|...............................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/unknown-argument-type"
! 
! Unknown argument type 'c' replaced by 'm'.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l.184 }
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| The letter 'c' does not specify a known argument type. LaTeX will assume you
| want a standard mandatory argument (type 'm').
|...............................................
> \foo=\protected macro:
#1#2#3->.
<recently read> }
l.184 }
> \foo code=undefined.
<recently read> }
l.184 }
============================================================
============================================================
TEST 10: Some valid expandable functions
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining document command \foo with arg. spec. 'm' on line ....
.................................................
> \foo=macro:
#1->(#1).
<recently read> }
l.201 }
> \foo code=undefined.
<recently read> }
l.201 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. '+m' on line ....
*************************************************
> \foo=\long macro:
#1->(#1).
<recently read> }
l.201 }
> \foo code=undefined.
<recently read> }
l.201 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'mmm' on line ....
*************************************************
> \foo=macro:
#1#2#3->(#1)(#2)(#3).
<recently read> }
l.201 }
> \foo code=undefined.
<recently read> }
l.201 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'om' on line ....
*************************************************
> \foo=macro:
->\__xparse_expandable_grab_D:w \foo (arg 1)
[]{-NoValue-}\__xparse_expandable_grab_m:w \__xparse_grab_expandable_end:wN
\foo code \q__xparse \foo  .
<recently read> }
l.201 }
> \foo code=\long macro:
#1#2->(#1)(#2).
<recently read> }
l.201 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. '+o+m' on line ....
*************************************************
> \foo=macro:
->\__xparse_expandable_grab_D:w \foo (arg 1)
[]{-NoValue-}\__xparse_expandable_grab_m:w \__xparse_grab_expandable_end:wN
\foo code \q__xparse \foo  .
<recently read> }
l.201 }
> \foo code=\long macro:
#1#2->(#1)(#2).
<recently read> }
l.201 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'sm' on line ....
*************************************************
> \foo=macro:
->\__xparse_expandable_grab_t:w \foo (arg 1) *\__xparse_expandable_grab_m:w
\__xparse_grab_expandable_end:wN \foo code \q__xparse \foo  .
<recently read> }
l.201 }
> \foo code=\long macro:
#1#2->(#1)(#2).
<recently read> }
l.201 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'osm' on line ....
*************************************************
> \foo=macro:
->\__xparse_expandable_grab_D:w \foo (arg 1)
[]{-NoValue-}\__xparse_expandable_grab_t:w \foo (arg 2)
*\__xparse_expandable_grab_m:w \__xparse_grab_expandable_end:wN \foo code
\q__xparse \foo  .
<recently read> }
l.201 }
> \foo code=\long macro:
#1#2#3->(#1)(#2)(#3).
<recently read> }
l.201 }
============================================================
============================================================
TEST 11: Not valid as expandable functions
============================================================
.................................................
. LaTeX info: "xparse/define-command"
. 
. Defining document command \foo with arg. spec. 'mo' on line ....
.................................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/expandable-ending-optional"
! 
! Argument specification for expandable command ends with optional argument.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l.210 }
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| Expandable commands must have a final mandatory argument (or no arguments at
| all). You cannot have a terminal optional argument with expandable commands.
|...............................................
> \foo=macro:
->\__xparse_expandable_grab_m:w \__xparse_expandable_grab_D:w \foo (arg 2)
[]{-NoValue-}\__xparse_grab_expandable_end:wN \foo code \q__xparse \foo  .
<recently read> }
l.210 }
> \foo code=\long macro:
#1#2->(#1).
<recently read> }
l.210 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. '+mmm' on line ....
*************************************************
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/inconsistent-long"
! 
! Inconsistent long arguments for expandable command.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l.210 }
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| The arguments for an expandable command must either all be short or all be
| long. You have tried to mix the two types.
|...............................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/inconsistent-long"
! 
! Inconsistent long arguments for expandable command.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l.210 }
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| The arguments for an expandable command must either all be short or all be
| long. You have tried to mix the two types.
|...............................................
> \foo=\long macro:
#1#2#3->(#1)(#2)(#3).
<recently read> }
l.210 }
> \foo code=\long macro:
#1#2->(#1).
<recently read> }
l.210 }
*************************************************
* LaTeX warning: "xparse/redefine-command"
* 
* Redefining document command \foo with arg. spec. 'o+m' on line ....
*************************************************
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/inconsistent-long"
! 
! Inconsistent long arguments for expandable command.
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l.210 }
|'''''''''''''''''''''''''''''''''''''''''''''''
| This is a coding error.
| 
| The arguments for an expandable command must either all be short or all be
| long. You have tried to mix the two types.
|...............................................
> \foo=macro:
->\__xparse_expandable_grab_D:w \foo (arg 1)
[]{-NoValue-}\__xparse_expandable_grab_m:w \__xparse_grab_expandable_end:wN
\foo code \q__xparse \foo  .
<recently read> }
l.210 }
> \foo code=\long macro:
#1#2->(#1)(#2).
<recently read> }
l.210 }
============================================================
============================================================
TEST 12: Checking for existing environments
============================================================
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/environment-already-defined"
! 
! Environment 'foo' already defined!
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l.229 }
|'''''''''''''''''''''''''''''''''''''''''''''''
| You have used \NewDocumentEnvironment with an environment that already has a
| definition.
| The existing definition of 'foo' will be overwritten.
|...............................................
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! LaTeX error: "xparse/environment-not-yet-defined"
! 
! Environment 'foo' not yet defined!
! 
! See the LaTeX3 documentation for further information.
! 
! For immediate help type H <return>.
!...............................................  
l.229 }
|'''''''''''''''''''''''''''''''''''''''''''''''
| You have used \RenewDocumentEnvironment with an environment that was never
| defined.
| A new environment 'foo' will be created.
|...............................................
> \environment foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl
{\environment foo code }\tl_set:Nn \l__xparse_fn_tl {\environment foo 
}\l__xparse_args_tl .
<recently read> }
l.229 }
> \environment foo code=\protected\long macro:
->\cs_set_protected_nopar:Npx \environment foo end aux {\environment foo end
aux  \tl_tail:N \l__xparse_args_tl }First.
<recently read> }
l.229 }
============================================================
============================================================
TEST 13: Valid environment declarations
============================================================
.................................................
. LaTeX info: "xparse/define-environment"
. 
. Defining document environment 'foo' with arg. spec. 'mmm' on line ....
.................................................
> \environment foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl
{\environment foo code }\tl_set:Nn \l__xparse_fn_tl {\environment foo 
}\__xparse_grab_m_3:w \l__xparse_args_tl .
<recently read> }
l.247 }
> \environment foo code=\protected\long macro:
#1#2#3->\cs_set_protected_nopar:Npx \environment foo end aux {\environment foo
end aux  \tl_tail:N \l__xparse_args_tl }(#1)(#2)(#3).
<recently read> }
l.247 }
*************************************************
* LaTeX warning: "xparse/redefine-environment"
* 
* Redefining document environment 'foo' with arg. spec. 'som' on line ....
*************************************************
> \environment foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl
{\environment foo code }\tl_set:Nn \l__xparse_fn_tl {\environment foo 
}\__xparse_grab_t:w *\__xparse_grab_D:w []{-NoValue-}\__xparse_grab_m_1:w
\l__xparse_args_tl .
<recently read> }
l.247 }
> \environment foo code=\protected\long macro:
#1#2#3->\cs_set_protected_nopar:Npx \environment foo end aux {\environment foo
end aux  \tl_tail:N \l__xparse_args_tl }(#1)(#2)(#3).
<recently read> }
l.247 }
*************************************************
* LaTeX warning: "xparse/redefine-environment"
* 
* Redefining document environment 'foo' with arg. spec. 'so+m' on line ....
*************************************************
> \environment foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl
{\environment foo code }\tl_set:Nn \l__xparse_fn_tl {\environment foo 
}\__xparse_grab_t:w *\__xparse_grab_D:w []{-NoValue-}\__xparse_grab_m_long:w
\l__xparse_args_tl .
<recently read> }
l.247 }
> \environment foo code=\protected\long macro:
#1#2#3->\cs_set_protected_nopar:Npx \environment foo end aux {\environment foo
end aux  \tl_tail:N \l__xparse_args_tl }(#1)(#2)(#3).
<recently read> }
l.247 }
*************************************************
* LaTeX warning: "xparse/redefine-environment"
* 
* Redefining document environment 'foo' with arg. spec. 'u{stop}om' on line
* 247.
*************************************************
> \environment foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl
{\environment foo code }\tl_set:Nn \l__xparse_fn_tl {\environment foo 
}\__xparse_grab_u:w {stop}\__xparse_grab_D:w []{-NoValue-}\__xparse_grab_m_1:w
\l__xparse_args_tl .
<recently read> }
l.247 }
> \environment foo code=\protected\long macro:
#1#2#3->\cs_set_protected_nopar:Npx \environment foo end aux {\environment foo
end aux  \tl_tail:N \l__xparse_args_tl }(#1)(#2)(#3).
<recently read> }
l.247 }
*************************************************
* LaTeX warning: "xparse/redefine-environment"
* 
* Redefining document environment 'foo' with arg. spec. 'moo' on line ....
*************************************************
> \environment foo=\protected macro:
->\int_zero:N \l__xparse_processor_int \tl_set:Nn \l__xparse_args_tl
{\environment foo code }\tl_set:Nn \l__xparse_fn_tl {\environment foo 
}\__xparse_grab_m_1:w \__xparse_grab_D_trailing:w
[]{-NoValue-}\__xparse_grab_D_trailing:w []{-NoValue-}\l__xparse_args_tl .
<recently read> }
l.247 }
> \environment foo code=\protected\long macro:
#1#2#3->\cs_set_protected_nopar:Npx \environment foo end aux {\environment foo
end aux  \tl_tail:N \l__xparse_args_tl }(#1)(#2)(#3).
<recently read> }
l.247 }
============================================================
============================================================
TEST 14: Environment groups: should show "outside" and 1
============================================================
> \l_test_tl=macro:
->outside.
<recently read> }
l.276 }
> 1.
<argument> \currentgrouplevel 
l.276 }
> \l_test_tl=macro:
->outside.
<recently read> }
l.276 }
> 1.
<argument> \currentgrouplevel 
l.276 }
> \l_test_tl=macro:
->outside.
<recently read> }
l.276 }
> 1.
<argument> \currentgrouplevel 
l.276 }
============================================================
============================================================
TEST 15: Passing args to end of environments: display correct args
============================================================
> (A).
<recently read> }
l.299 }
> (A)(B).
<recently read> }
l.299 }
> (A)(B)(C).
<recently read> }
l.299 }
> (A)(-NoValue-)(-NoValue-).
<recently read> }
l.299 }
============================================================
============================================================
TEST 16: Nested environments
============================================================
> \@currenvir=macro:
->foo.
<recently read> }
l.311 }
> \@currenvir=macro:
->document.
<recently read> }
l.311 }
============================================================
============================================================
TEST 17: Passing arguments to the end with more complex cases
============================================================
> \box57=
\hbox(6.94444+1.94444)x142.50034
.\OT1/cmr/m/n/10 s
.\OT1/cmr/m/n/10 t
.\OT1/cmr/m/n/10 a
.\OT1/cmr/m/n/10 r
.\OT1/cmr/m/n/10 t
.\OT1/cmr/m/n/10 m
.\OT1/cmr/m/n/10 i
.\OT1/cmr/m/n/10 d
.\OT1/cmr/m/n/10 d
.\OT1/cmr/m/n/10 l
.\OT1/cmr/m/n/10 e
.\OT1/cmr/m/n/10 s
.\OT1/cmr/m/n/10 t
.\OT1/cmr/m/n/10 o
.\OT1/cmr/m/n/10 p
.\OT1/cmr/m/n/10 !
.\OT1/cmr/m/n/10 s
.\OT1/cmr/m/n/10 t
.\OT1/cmr/m/n/10 a
.\OT1/cmr/m/n/10 r
.\OT1/cmr/m/n/10 t
.\OT1/cmr/m/n/10 m
.\OT1/cmr/m/n/10 i
.\OT1/cmr/m/n/10 d
.\OT1/cmr/m/n/10 d
.\OT1/cmr/m/n/10 l
.\OT1/cmr/m/n/10 e
.\OT1/cmr/m/n/10 s
.\OT1/cmr/m/n/10 t
.\OT1/cmr/m/n/10 o
.\OT1/cmr/m/n/10 p
.\OT1/cmr/m/n/10 !
! OK.
<argument> \l_tmpa_box 
l.328   }
============================================================
