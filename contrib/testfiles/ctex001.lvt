%
% Copyright (C) 2015 Liam Huang
%

\documentclass{article}
\input{regression-test}
\AUTHOR{Liam Huang}

\usepackage{expl3}

% the CTeX package does not support pTeX and upTeX
\ExplSyntaxOn
\bool_if:nF
  {
       \sys_if_engine_pdftex_p:
    || \sys_if_engine_xetex_p:
    || \sys_if_engine_luatex_p:
  }
  {
    \msg_log:n { Not-supported-engine! }
    \tex_end:D
  }
\ExplSyntaxOff

\START

\OMIT
% if pdfTeX is invoking, use CJK and gbsn fonts.
\ExplSyntaxOn
\sys_if_engine_pdftex:TF
  {
    \tl_const:Nn \CJKrmdefault { gbsn }
    \cs_new_eq:NN \CJKsfdefault \CJKrmdefault
    \cs_new_eq:NN \CJKttdefault \CJKrmdefault
    \usepackage[UTF8, zhmap = false, fontset = none]{ctex}
  }
  { \usepackage[UTF8, fontset = fandol]{ctex} }
\ExplSyntaxOff
\TIMO

% Skip the font loading stuff
\OMIT
\begin{document}
\TIMO

\showoutput

我爱 Anyi。

\end{document}
