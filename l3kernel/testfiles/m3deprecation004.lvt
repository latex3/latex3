%
% Copyright (C) 2020 The LaTeX3 Project
%
\input{regression-test}

\RequirePackage[check-declarations,log-functions]{expl3}

\START
\AUTHOR{Phelype Oleinik}

\ExplSyntaxOn
% \bool_gset_false:N \g__sys_deprecation_bool
% \cs_undefine:N \c_term_ior
% This should raise a deprecation error (within the 6-month grace period)
\msg_term:n

% Trick LaTeX into loading expl3.sty again
\cs_undefine:c { ver@expl3.sty }
\cs_undefine:N \l__expl_options_clist
% \bool_gset_true:N \g__kernel_deprecation_undo_recent_bool
\ExplSyntaxOff

\OMIT % now with undo-recent-deprecations
\RequirePackage[check-declarations,log-functions,undo-recent-deprecations]{expl3}
\TIMO

\ExplSyntaxOn
% And now this should work
\msg_term:n { ABC }
\ExplSyntaxOff

\END
