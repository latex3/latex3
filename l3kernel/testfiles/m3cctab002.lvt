%
% Copyright (C) 2019,2020 The LaTeX3 Project
%

\documentclass{minimal}
\input{regression-test}

\RequirePackage[enable-debug]{expl3}
\ExplSyntaxOn
\debug_on:n { check-declarations , deprecation }
\ExplSyntaxOff

\START
\AUTHOR{Phelype Oleinik}

\ExplSyntaxOn

\TEST { Undefined~cctab~for~\cctab_end:N }
  { \cctab_begin:N \c_some_undefined_cctab }

\TEST { Another~undefined~cctab~for~\cctab_end:N }
  {
    \int_set:Nn \l_tmpa_int { 99 }
    \cctab_begin:N \l_tmpa_int
  }

\TEST { Extra~\cctab_end: }
  { \cctab_end: }

\TEST { Nested~\cctab_begin:N }
  {
    \cctab_begin:N \c_code_cctab
      \cctab_begin:N \c_code_cctab
        \cctab_begin:N \c_code_cctab
          \cctab_begin:N \c_code_cctab
            \cctab_begin:N \c_code_cctab
            \cctab_end:
          \cctab_end:
        \cctab_end:
      \cctab_end:
    \cctab_end:
  }

\TEST { Nested~groups }
  {
    \cctab_select:N \c_code_cctab
    \group_begin:
      \cctab_select:N \c_code_cctab
      \group_begin:
        \cctab_select:N \c_code_cctab
      \group_end:
    \group_end:
  }

\TEST { Wrong~scoping }
  {
    \cctab_new:N \c_new_cctab
    \cctab_new:N \g_new_cctab
    \cctab_new:N \l_new_cctab
    \cctab_const:Nn \c_const_cctab { }
    \cctab_const:Nn \g_const_cctab { }
    \cctab_const:Nn \l_const_cctab { }
    \cctab_gset:Nn \c_const_cctab { }
    \cctab_gset:Nn \g_const_cctab { }
    \cctab_gset:Nn \l_const_cctab { }
  }

\ExplSyntaxOff

\END
