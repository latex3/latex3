%
% Copyright (C) 2021 The LaTeX Project
\documentclass{minimal}
\input{regression-test}

\RequirePackage[enable-debug]{expl3}
\ExplSyntaxOn
\debug_on:n { check-declarations , deprecation , log-functions }
\ExplSyntaxOff

% \begin{document}

\START
\AUTHOR{Bruno Le Floch}
\ExplSyntaxOn

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\TEST { regex_case_match:nn }
  {
    \regex_set:Nn \l_tmpa_regex { [a-z]bc }
    \cs_set_protected:Npn \test:n #1
      {
        \TYPE{#1:}
        \regex_case_match:nnTF
          {
            \l_tmpa_regex { \TYPE{abc} }
            { (?i) Y \w } { \TYPE{Y} }
            { z \Z } { \TYPE{Z} }
          }
          {#1} { \TRUE } { \FALSE }
      }
    \test:n { }
    \test:n { abc }
    \test:n { Y abc }
    \test:n { y abc }
    \test:n { y bc }
    \test:n { y ; bc }
    \test:n { y ; bc z }
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\TEST { regex_case_match:nn ~ error }
  {
    \regex_case_match:nnTF { Something ~ odd. } { .. } { \ERROR } { \FALSE }
    \regex_case_match:nn { * } { .. }
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\END
