%
% Copyright (C) 2012 The LaTeX3 Project
%

% Input the regression test macros for LaTeX
\input{regression-test}

\RequirePackage[check-declarations,log-functions]{expl3}




% Everything before this is ignored by the test system.
\START

\AUTHOR{Bruno Le Floch}


\ExplSyntaxOn

% The next two \TESTs are meant to check that issue #100 is resolved.
%
\TEST { Trimming~trailing~letters~common~between~base~and~variant }
  {
    \cs_new:Npn \foo:nnnNN #1#2#3#4#5 { }
    \cs_generate_variant:Nn \foo:nnnNN
      { on , oxvcN , onoNc , noncN , nnnNNN }
    \iow_term:x { \cs_meaning:N \foo:onNnN }
    \iow_term:x { \cs_meaning:N \foo:oxvcN }
    \iow_term:x { \cs_meaning:N \foo:onoNc }
    \iow_term:x { \cs_meaning:N \foo:noncN }
    \iow_term:x { \cs_meaning:N \foo:nnnNNN }
  }

\TEST { Leaving~non-N/n-base~letters~unchanged~is~allowed }
  {
    \prg_new_conditional:Npnn \foo:oNn #1#2 { TF } { }
    \cs_generate_variant:Nn \foo:oNnTF
      { oNoT , oNxTF , ocnTF , xNn , n , oNnTFF }
    \iow_term:x { \cs_meaning:N \foo:oNoTF }
    \iow_term:x { \cs_meaning:N \foo:oNxTF }
    \iow_term:x { \cs_meaning:N \foo:ocnTF }
    \iow_term:x { \cs_meaning:N \foo:xNnTF }
    \iow_term:x { \cs_meaning:N \foo:nNnTF }
    \iow_term:x { \cs_meaning:N \foo:oNnTFF }
  }

\END
