%
% Copyright (C) 2009-2012 LaTeX3 Project
%

\documentclass{minimal}
\input{regression-test}
% Leave some padding so that the line numbers
% of the tests don't change later on.

\RequirePackage[log-functions,native-drivers]{expl3}

\begin{document}
\START
\AUTHOR{Joseph Wright}
\ExplSyntaxOn

\OMIT
\tl_set:cn {input@path} {testfiles/}
\tl_new:N \l_A_tl
\tl_new:N \l_B_tl
\tl_new:N \l_C_tl
\TIMO

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST { If~file~exists}
  {
    \file_if_exist:nTF { filetest.txt } { \TRUE } { \ERROR }
    \file_if_exist:nTF { NotAFile.xxx.yyy.zzz } { \ERROR } { \FALSE }
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\TEST { Split~file~names }
  {
    \file_split_path_name_ext:nNNN { foo } \l_A_tl \l_B_tl \l_C_tl
    \tl_show:N \l_A_tl
    \tl_show:N \l_B_tl
    \tl_show:N \l_C_tl
    \file_split_path_name_ext:nNNN { foo.bar } \l_A_tl \l_B_tl \l_C_tl
    \tl_show:N \l_A_tl
    \tl_show:N \l_B_tl
    \tl_show:N \l_C_tl
    \file_split_path_name_ext:nNNN { foo.bar.baz } \l_A_tl \l_B_tl \l_C_tl
    \tl_show:N \l_A_tl
    \tl_show:N \l_B_tl
    \tl_show:N \l_C_tl
    \file_split_path_name_ext:nNNN { / foo } \l_A_tl \l_B_tl \l_C_tl
    \tl_show:N \l_A_tl
    \tl_show:N \l_B_tl
    \tl_show:N \l_C_tl
    \file_split_path_name_ext:nNNN { foo / bar / baz.foo.bar }
      \l_A_tl \l_B_tl \l_C_tl
    \tl_show:N \l_A_tl
    \tl_show:N \l_B_tl
    \tl_show:N \l_C_tl
    \file_split_path_name_ext:nNNN { .. / foo.bar } \l_A_tl \l_B_tl \l_C_tl
    \tl_show:N \l_A_tl
    \tl_show:N \l_B_tl
    \tl_show:N \l_C_tl
    \file_split_path_name_ext:nNNN { } \l_A_tl \l_B_tl \l_C_tl
    \tl_show:N \l_A_tl
    \tl_show:N \l_B_tl
    \tl_show:N \l_C_tl
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST { Add~path~to~file }
  {
    \file_add_path:nN { filetest.txt } \l_A_tl
    \tl_show:N \l_A_tl
    \file_add_path:nN { NotAFile.xxx.yyy.zzz } \l_A_tl
    \tl_show:N \l_A_tl
  }
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST { Loading~a~file }
  {
    \file_input:n { filetest.txt }
    \file_input:n { NotAFile.xxx.yyy.zzz }
  }
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST { File~listing }
  { \file_list: }
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\END
