%
% Copyright (C) 2012 LaTeX3 Project
%

\documentclass{minimal}
\input{regression-test}

\RequirePackage[check-declarations,log-functions]{expl3}
\RequirePackage{l3fp-extras}

\begin{document}
\START
\AUTHOR{Bruno Le Floch}
\ExplSyntaxOn

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\TEST { Assign~a~symbolic~expression }
  {
    \fp_new_var:n { A }
    \fp_new_var:n { B }
    \fp_new_var:n { C }
    \fp_set:Nn \l_tmpa_fp { A + csc(B) + C * sin(B) }
    \iow_term:x { \fp_to_tl:N \l_tmpa_fp }
    \fp_set_var:nn { B } { pi/6 }
    \iow_term:x { \fp_to_tl:N \l_tmpa_fp }
    \iow_term:x { \fp_to_tl:n { \l_tmpa_fp } }
    \fp_set_var:nn { C } { 1.2 }
    \iow_term:x { \fp_to_tl:n { \l_tmpa_fp } }
    \fp_set_var:nn { A } { 1 }
    \iow_term:x { \fp_to_tl:n { \l_tmpa_fp } }
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\END