%
% Copyright (C) 2011 LaTeX3 Project
%

\documentclass{minimal}
\input{regression-test}

\RequirePackage{l3fp-new}

\begin{document}
\START
\AUTHOR{Bruno Le Floch}
\ExplSyntaxOn

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TESTEXP { Arithmetic }
  {
    \fp_eval:n { 2 + 3 * 4 }\NEWLINE
    \fp_eval:n { ( 2 + 3 ) * 4 } \NEWLINE
    \fp_eval:n { 1.1e-2 + 2e3*(3 - 2e1 + 5.023e3/.2)/2. - ((9)*2+3/5) } \NEWLINE
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TESTEXP { Unary~ minus }
  {
    \fp_eval:n { - + - - 2 + 3 * 4 }\NEWLINE
    \fp_eval:n { - ( - ( ( ( - 2 ) + - 3 ) ) * 4 ) } \NEWLINE
    \fp_eval:n { 1.1e-2 + 2e3 * -(3-2e1 + 5.023e3/-.2)/2. - ((-9)*2+3/5) }
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TESTEXP { Special~ values }
  {
    \fp_eval:n {inf} \NEWLINE
    \fp_eval:n {inf*1+inf} \NEWLINE
    \fp_eval:n {nan-3*nan} \NEWLINE
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TESTEXP { Functions }
  {
    \fp_eval:n {ln 3 + 4 } \NEWLINE
    \fp_eval:n {-ln(3)+ 4 } \NEWLINE
    \fp_eval:n {ln(ln(3))} \NEWLINE
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TESTEXP { Various~errors }
  {
    \fp_eval:n { skjdhf (2) } \NEWLINE
    \fp_eval:n { 1 ( } \NEWLINE
    \fp_eval:n { } \NEWLINE
    \fp_eval:n { ) } \NEWLINE
    \fp_eval:n { 1.2.3 } \NEWLINE
    \fp_eval:n { (2+3)(4+5) } \NEWLINE
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TESTEXP { More~errors }
  {
    \fp_eval:n { * } \NEWLINE
    \fp_eval:n { / 1 } \NEWLINE
    \fp_eval:n { 1 ** 2} \NEWLINE
    \fp_eval:n { e. } \NEWLINE
    \fp_eval:n { 1 + \relax - \use:c { l_undefined_int } * 2 } \NEWLINE
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\END