% Copyright 2012 The LaTeX3 Project
\documentclass{ltnews}

\usepackage{expl3,siunitx,catchfile,l3regex}
\usepackage{hologo}

\publicationmonth{June}
\publicationyear{2012}
\publicationissue{8}

\def\DTX{\textsc{dtx}}
\def\STY{\textsc{sty}}

\ExplSyntaxOn
\NewDocumentCommand { \calcnum } { m }
  { \num { \fp_to_scientific:n {#1} } }
\ExplSyntaxOff

\begin{document}
\maketitle

The eighth issue means the fourth year!
Time sure flys; it's an exciting time to be a \LaTeX\ developer.

\section{Extended floating point support}

Bruno Le Floch has been re-writing the floating point module to function in an `expandable' manner. This allows floating point calculations to be computed far more flexibly and efficiently than before.
The expandable nature of the new code allows its use inside operations such as writing to external files for which previously any such calculations would have to be pre-calculated before any of the writing operations began.

Bruno's work on the floating point module has been officially released into the main \textsc{svn} repository for \texttt{l3kernel}; \TeX\ Live 2012 will contain the `old' code for stability while this year is spent testing the new code in production environments and ironing out any wrinkles.

Here's a neat example as suggested in the documentation, which produces `\calcnum { round ( 200 pi * sin ( 2.3 ^ 5 ) , 2 ) }':

\begin{verbatim}
\usepackage{xparse, siunitx} 
\ExplSyntaxOn
\NewDocumentCommand { \calcnum } { m }
  { \num { \fp_to_scientific:n {#1} } }
\ExplSyntaxOff
\calcnum {
  round ( 200 pi * sin ( 2.3 ^ 5 ) , 2 )
}
\end{verbatim}

This feature is invaluable for simple (and not-so-simple) calculations in document and package authoring, and has been lacking a robust solution for many years.
While \hologo{LuaLaTeX} can perform similar tasks within its Lua environment, the floating point support is written using the \texttt{expl3} programming language only, and is thus available in \hologo{pdfLaTeX} and \hologo{XeLaTeX} as well.

\section{Regular expressions in \TeX}

If floating point support wasn't enough, Bruno has also written a complete regular expression engine in \texttt{expl3} as well.
[Ed: Consider my mind blown.]
Now, many reading this will no doubt be aware of the following quote attributed to Jamie Zawinski:
\begin{quote}\itshape
Some people, when confronted with a problem, think
``I know, I'll use regular expressions.''
Now they have two problems.
\end{quote}
And as humorous as the saying is, it's still fair to say that regular expressions are a great tool for manipulating streams of text.
We desparately hope that people will \emph{not} start using the regex code to do things like parse \textsc{xml} documents; however, for general search--replace duties, there's never been anything like \texttt{l3regex} for the \LaTeX\ world.
As a trivial example, there are
\CatchFileDef\thisfile{\jobname.tex}{}%
\ExplSyntaxOn
\exp_args:Nno \regex_count:nnN { (?i) W e } {\thisfile} \l_tmpa_int
\int_use:N \l_tmpa_int
\ExplSyntaxOff
~instances of the word `We' or `we' in this document (including those two).
This value is counted automatically in two lines of code.

And again, it is available for \hologo{pdfLaTeX} and \hologo{XeLaTeX} users as well as \hologo{LuaLaTeX} ones; it is also bear noting this provides an easy solution for applying regex processing to \LaTeX\ documents even on the Windows operating system which does not have native support for such things.

\iffalse
\section{docstrip}

We're considering updating docstrip for \LaTeX3 code.
This will allow verbose module names in the \DTX\ code to be written using a \texttt{@@} shorthand which is replaced when the \STY\ file is extracted.
There are two advantages to using this syntax: easier to type, and the possibility of a clear separation between internal package commands and functions intended to be used by external programmers.
\fi

\section{Continual revolution---the `small bang'}

In addition to the major additions introduced above, Frank Mittelbach has been trawling the \texttt{expl3} interface with a fresh eye to resolve any outstanding issues in the consistency or logic of the names of functions across the whole code base.

We are very mindful of the fact that for people to find \texttt{expl3} a useful tool, it must have a stable interface.
This said, there are still some musty corners that we can show where people simply haven't been using certain functions.
In select cases, we're re-assessing whether all of the (sometimes esoteric) odds and ends that have been added to \texttt{expl3} really belong; in other cases, it's now clear than some naming or behaviour choices weren't correct the first time around.
To address this tarnish, we're carefully making some minor changes to parts of the \texttt{expl3} interface and we'd like to allay any fears that \texttt{expl3} isn't stable.
The \texttt{expl3} language now offers some (INSERT) functions plus their variants, and we're talking about changing but a very small percentage of these, and not common ones at that.
We don't want it to become a mess, so we think it's better to tidy things up as we go.

Follow the LaTeX-L mailing list for such details as they arise.


\section{Boston in July}

Will and Frank
% not "Frank and Will" because of a clash with the next word which is...
will
% (see what I mean?)
be attending \textsc{tug} 2012 in Boston.
We hope to see you there!

\end{document}
